<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jurnal Digital 7 Kebiasaan Anak Indonesia Hebat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .habit-card {
            transition: all 0.3s ease;
        }
        .habit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Jurnal Digital</h1>
                <p class="text-lg text-indigo-600 font-semibold">7 Kebiasaan Anak Indonesia Hebat</p>
                <div class="w-20 h-1 bg-indigo-500 mx-auto mt-4 rounded"></div>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Masukkan username">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Masukkan password">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="role" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <option value="">Pilih Role</option>
                        <option value="admin">Admin</option>
                        <option value="guru">Guru Wali</option>
                        <option value="siswa">Siswa</option>
                    </select>
                </div>
                
                <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition duration-300 font-semibold">
                    Masuk
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden min-h-screen">
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <h1 class="text-2xl font-bold text-gray-800">Dashboard Admin</h1>
                    <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">Logout</button>
                </div>
            </div>
        </nav>
        
        <div class="max-w-7xl mx-auto p-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“Š Statistik</h3>
                    <div class="space-y-2">
                        <p class="text-sm text-gray-600">Total Guru: <span id="totalGuru" class="font-semibold">0</span></p>
                        <p class="text-sm text-gray-600">Total Siswa: <span id="totalSiswa" class="font-semibold">0</span></p>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“ Import Data</h3>
                    <div class="space-y-3">
                        <button onclick="downloadTemplate('guru')" class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 text-sm">
                            Download Template Guru
                        </button>
                        <button onclick="downloadTemplate('siswa')" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 text-sm">
                            Download Template Siswa
                        </button>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ”— Penugasan</h3>
                    <button onclick="showAssignmentModal()" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600 text-sm">
                        Kelola Penugasan Guru-Siswa
                    </button>
                </div>
            </div>
            
            <!-- Tabs -->
            <div class="bg-white rounded-xl card-shadow">
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6">
                        <button onclick="switchTab('guru')" id="tabGuru" class="py-4 px-1 border-b-2 border-indigo-500 text-indigo-600 font-medium">
                            Data Guru Wali
                        </button>
                        <button onclick="switchTab('siswa')" id="tabSiswa" class="py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                            Data Siswa
                        </button>
                    </nav>
                </div>
                
                <!-- Guru Tab -->
                <div id="guruTab" class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Data Guru Wali</h3>
                        <div class="flex space-x-3">
                            <input type="file" id="csvGuruFile" accept=".csv" class="hidden" onchange="importCSV('guru')">
                            <button onclick="document.getElementById('csvGuruFile').click()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                                Import CSV
                            </button>
                            <button onclick="showAddGuruModal()" class="bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600">
                                Tambah Guru
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama Guru</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jabatan</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jurusan</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="guruTableBody" class="bg-white divide-y divide-gray-200">
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Siswa Tab -->
                <div id="siswaTab" class="p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold text-gray-800">Data Siswa</h3>
                        <div class="flex space-x-3">
                            <input type="file" id="csvSiswaFile" accept=".csv" class="hidden" onchange="importCSV('siswa')">
                            <button onclick="document.getElementById('csvSiswaFile').click()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                                Import CSV
                            </button>
                            <button onclick="showAddSiswaModal()" class="bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600">
                                Tambah Siswa
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama Siswa</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kelas</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jurusan</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Guru Wali</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="siswaTableBody" class="bg-white divide-y divide-gray-200">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Guru Dashboard -->
    <div id="guruDashboard" class="hidden min-h-screen">
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <h1 class="text-2xl font-bold text-gray-800">Dashboard Guru Wali</h1>
                    <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">Logout</button>
                </div>
            </div>
        </nav>
        
        <div class="max-w-7xl mx-auto p-6">
            <!-- Filter Section -->
            <div class="bg-white rounded-xl card-shadow p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ” Filter Data Jurnal</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Kelas</label>
                        <select id="filterKelas" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <option value="">Semua Kelas</option>
                            <option value="X">X</option>
                            <option value="XI">XI</option>
                            <option value="XII">XII</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Jurusan</label>
                        <div class="space-y-2 max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2">
                            <label class="flex items-center">
                                <input type="checkbox" value="IPA" class="jurusan-filter mr-2">
                                <span class="text-sm">IPA</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="IPS" class="jurusan-filter mr-2">
                                <span class="text-sm">IPS</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="Bahasa" class="jurusan-filter mr-2">
                                <span class="text-sm">Bahasa</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="TKJ" class="jurusan-filter mr-2">
                                <span class="text-sm">TKJ</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ“… Tanggal</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg">
                                    <span class="text-white text-sm">ğŸ“…</span>
                                </div>
                            </div>
                            <input type="date" id="filterTanggal" class="w-full pl-14 pr-4 py-3 border-2 border-green-200 rounded-xl focus:ring-4 focus:ring-green-200 focus:border-green-500 transition-all duration-300 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 font-medium text-gray-700">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Agama</label>
                        <select id="filterAgama" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <option value="">Semua Agama</option>
                            <option value="Islam">Islam</option>
                            <option value="Kristen">Kristen</option>
                            <option value="Katolik">Katolik</option>
                            <option value="Hindu">Hindu</option>
                            <option value="Buddha">Buddha</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-4">
                    <button onclick="applyFilter()" class="bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600">
                        Filter Data
                    </button>
                    <button onclick="resetFilter()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 ml-2">
                        Reset Filter
                    </button>
                </div>
            </div>
            
            <!-- Data Table -->
            <div class="bg-white rounded-xl card-shadow p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“Š Data Jurnal Siswa</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama Siswa</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kelas</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tanggal</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kebiasaan Selesai</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="jurnalTableBody" class="bg-white divide-y divide-gray-200">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Siswa Dashboard -->
    <div id="siswaDashboard" class="hidden min-h-screen">
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <h1 class="text-2xl font-bold text-gray-800">Jurnal 7 Kebiasaan</h1>
                    <div class="flex items-center space-x-4">
                        <span id="currentDate" class="text-gray-600"></span>
                        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">Logout</button>
                    </div>
                </div>
            </div>
        </nav>
        
        <div class="max-w-6xl mx-auto p-6">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Selamat Datang, <span id="studentName">Siswa</span>!</h2>
                <p class="text-gray-600">Isi jurnal harian 7 kebiasaan anak Indonesia hebat</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Bangun Pagi -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-4">
                            <span class="text-2xl">ğŸŒ…</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Bangun Pagi</h3>
                    </div>
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-gray-700">Waktu Bangun</label>
                        <input type="time" id="bangunPagi" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500">
                        <button onclick="saveHabit('bangunPagi')" class="w-full bg-yellow-500 text-white py-2 rounded-lg hover:bg-yellow-600">
                            Simpan
                        </button>
                    </div>
                </div>

                <!-- Beribadah -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                            <span class="text-2xl">ğŸ¤²</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Beribadah</h3>
                    </div>
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-gray-700">Agama</label>
                        <select id="agamaSelect" onchange="updateIbadahOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            <option value="">Pilih Agama</option>
                            <option value="Islam">Islam</option>
                            <option value="Kristen">Kristen</option>
                            <option value="Katolik">Katolik</option>
                            <option value="Hindu">Hindu</option>
                            <option value="Buddha">Buddha</option>
                        </select>
                        <div id="ibadahOptions" class="space-y-2 max-h-40 overflow-y-auto">
                        </div>
                        <button onclick="saveHabit('beribadah')" class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600">
                            Simpan
                        </button>
                    </div>
                </div>

                <!-- Berolahraga -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                            <span class="text-2xl">ğŸƒ</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Berolahraga</h3>
                    </div>
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-gray-700">Jenis Olahraga</label>
                        <input type="text" id="jenisOlahraga" placeholder="Contoh: Lari, Push up, Sepak Bola" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500">
                        <label class="block text-sm font-medium text-gray-700">Durasi (menit)</label>
                        <input type="number" id="durasiOlahraga" placeholder="30" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500">
                        <button onclick="saveHabit('berolahraga')" class="w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600">
                            Simpan
                        </button>
                    </div>
                </div>

                <!-- Makan Sehat -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4">
                                <span class="text-2xl">ğŸ¥—</span>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Makan Sehat</h3>
                        </div>
                        <button onclick="showMakanDetail()" class="text-orange-500 hover:text-orange-600 text-sm font-medium">
                            Detail
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div class="space-y-2">
                            <p class="text-sm font-medium text-gray-700">ğŸŒ… Sarapan (06:00-09:00)</p>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <label class="flex items-center"><input type="checkbox" class="makan-sarapan mr-1" value="karbohidrat"> Karbohidrat</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-sarapan mr-1" value="protein"> Protein</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-sarapan mr-1" value="sayuran"> Sayuran</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-sarapan mr-1" value="buah"> Buah</label>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <p class="text-sm font-medium text-gray-700">â˜€ï¸ Makan Siang (12:00-14:00)</p>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <label class="flex items-center"><input type="checkbox" class="makan-siang mr-1" value="karbohidrat"> Karbohidrat</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-siang mr-1" value="protein"> Protein</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-siang mr-1" value="sayuran"> Sayuran</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-siang mr-1" value="buah"> Buah</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-siang mr-1" value="minuman"> Minuman Sehat</label>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <p class="text-sm font-medium text-gray-700">ğŸŒ™ Makan Malam (18:00-20:00)</p>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <label class="flex items-center"><input type="checkbox" class="makan-malam mr-1" value="karbohidrat"> Karbohidrat</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-malam mr-1" value="protein"> Protein</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-malam mr-1" value="sayuran"> Sayuran</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-malam mr-1" value="buah"> Buah</label>
                                <label class="flex items-center"><input type="checkbox" class="makan-malam mr-1" value="minuman"> Minuman Sehat</label>
                            </div>
                        </div>
                        <button onclick="saveHabit('makanSehat')" class="w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600">
                            Simpan
                        </button>
                    </div>
                </div>

                <!-- Gemar Belajar -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                                <span class="text-2xl">ğŸ“š</span>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Gemar Belajar</h3>
                        </div>
                        <button onclick="showBelajarDetail()" class="text-blue-500 hover:text-blue-600 text-sm font-medium">
                            ğŸ“‹ Detail
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div id="belajarSummary" class="bg-blue-50 p-3 rounded-lg text-sm">
                            <p class="text-blue-800 font-medium">ğŸ“Š Ringkasan Hari Ini:</p>
                            <p class="text-blue-700">Aktivitas: <span id="totalAktivitas">0</span> kegiatan</p>
                            <p class="text-blue-700">Total Durasi: <span id="totalDurasi">0</span> menit</p>
                        </div>
                        <div id="belajarHistory" class="max-h-32 overflow-y-auto space-y-2">
                            <!-- History will be populated here -->
                        </div>
                        <button onclick="saveHabit('gemarBelajar')" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">
                            Simpan
                        </button>
                    </div>
                </div>

                <!-- Bermasyarakat -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4">
                                <span class="text-2xl">ğŸ¤</span>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800">Bermasyarakat</h3>
                        </div>
                        <button onclick="showBermasyarakatDetail()" class="text-purple-500 hover:text-purple-600 text-sm font-medium">
                            ğŸ“‹ Detail
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div id="bermasyarakatSummary" class="bg-purple-50 p-3 rounded-lg text-sm">
                            <p class="text-purple-800 font-medium">ğŸ“Š Ringkasan Hari Ini:</p>
                            <p class="text-purple-700">Kegiatan: <span id="totalKegiatanMasyarakat">0</span> aktivitas</p>
                            <p class="text-purple-700">Total Durasi: <span id="totalDurasiMasyarakat">0</span> menit</p>
                        </div>
                        <div id="bermasyarakatHistory" class="max-h-32 overflow-y-auto space-y-2">
                            <!-- History will be populated here -->
                        </div>
                        <button onclick="saveHabit('bermasyarakat')" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600">
                            Simpan
                        </button>
                    </div>
                </div>

                <!-- Tidur Cepat -->
                <div class="bg-white rounded-xl card-shadow p-6 habit-card">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mr-4">
                            <span class="text-2xl">ğŸ˜´</span>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Tidur Cepat</h3>
                    </div>
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-gray-700">Waktu Tidur</label>
                        <input type="time" id="tidurCepat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        <button onclick="saveHabit('tidurCepat')" class="w-full bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600">
                            Simpan
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Guru Modal -->
    <div id="addGuruModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md">
            <h3 class="text-lg font-semibold mb-4">Tambah Guru Wali</h3>
            <form id="addGuruForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Guru</label>
                    <input type="text" id="namaGuru" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Jabatan</label>
                    <input type="text" id="jabatanGuru" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Jurusan</label>
                    <input type="text" id="jurusanGuru" placeholder="Pisahkan dengan koma jika lebih dari satu" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600">Simpan</button>
                    <button type="button" onclick="closeModal('addGuruModal')" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Siswa Modal -->
    <div id="addSiswaModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md">
            <h3 class="text-lg font-semibold mb-4">Tambah Siswa</h3>
            <form id="addSiswaForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Siswa</label>
                    <input type="text" id="namaSiswa" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Kelas</label>
                    <select id="kelasSiswa" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                        <option value="">Pilih Kelas</option>
                        <option value="X">X</option>
                        <option value="XI">XI</option>
                        <option value="XII">XII</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Jurusan</label>
                    <select id="jurusanSiswa" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                        <option value="">Pilih Jurusan</option>
                        <option value="IPA">IPA</option>
                        <option value="IPS">IPS</option>
                        <option value="Bahasa">Bahasa</option>
                        <option value="TKJ">TKJ</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Agama</label>
                    <select id="agamaSiswa" class="w-full px-3 py-2 border border-gray-300 rounded-lg" required>
                        <option value="">Pilih Agama</option>
                        <option value="Islam">Islam</option>
                        <option value="Kristen">Kristen</option>
                        <option value="Katolik">Katolik</option>
                        <option value="Hindu">Hindu</option>
                        <option value="Buddha">Buddha</option>
                    </select>
                </div>
                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600">Simpan</button>
                    <button type="button" onclick="closeModal('addSiswaModal')" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Assignment Modal -->
    <div id="assignmentModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-2xl max-h-96 overflow-y-auto">
            <h3 class="text-lg font-semibold mb-4">Kelola Penugasan Guru-Siswa</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Guru Wali</label>
                    <select id="assignGuru" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        <option value="">Pilih Guru</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Siswa</label>
                    <div id="assignSiswaList" class="max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-3 space-y-2">
                    </div>
                </div>
                <div class="flex space-x-3">
                    <button onclick="saveAssignment()" class="flex-1 bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600">Simpan Penugasan</button>
                    <button onclick="closeModal('assignmentModal')" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">Batal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Makan Detail Modal -->
    <div id="makanDetailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-2xl max-h-96 overflow-y-auto">
            <h3 class="text-lg font-semibold mb-4">ğŸ¥— Panduan Makan Sehat & Bergizi</h3>
            <div class="space-y-4">
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-yellow-800 mb-2">ğŸŒ… Sarapan (06:00 - 09:00)</h4>
                    <p class="text-sm text-yellow-700">Contoh: Nasi, Lauk Ikan Gurame Bakar, Sayur Sop, Buah Naga, dan Susu</p>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-orange-800 mb-2">â˜€ï¸ Makan Siang (12:00 - 14:00)</h4>
                    <p class="text-sm text-orange-700">Contoh: Nasi, Lauk Ayam Goreng, Sayur Bayam, Buah Jeruk, dan Air Putih</p>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-blue-800 mb-2">ğŸŒ™ Makan Malam (18:00 - 20:00)</h4>
                    <p class="text-sm text-blue-700">Contoh: Buah Pisang, Roti Gandum, dan Susu Hangat</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-green-800 mb-2">ğŸ’¡ Tips Makan Sehat</h4>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li>â€¢ Makan dengan porsi seimbang</li>
                        <li>â€¢ Perbanyak sayur dan buah</li>
                        <li>â€¢ Minum air putih minimal 8 gelas sehari</li>
                        <li>â€¢ Hindari makanan berlemak berlebihan</li>
                    </ul>
                </div>
            </div>
            <button onclick="closeModal('makanDetailModal')" class="w-full bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600 mt-4">
                Tutup
            </button>
        </div>
    </div>

    <!-- Belajar Detail Modal -->
    <div id="belajarDetailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-6 text-center">ğŸ“š Detail Kegiatan Belajar</h3>
            
            <form id="belajarForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Jenis Kegiatan -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">âœ… Jenis Kegiatan</label>
                        <select id="jenisKegiatan" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Pilih Jenis Kegiatan</option>
                            <option value="Mengerjakan PR">ğŸ“ Mengerjakan PR</option>
                            <option value="Membaca Buku">ğŸ“– Membaca Buku</option>
                            <option value="Latihan Soal">ğŸ§® Latihan Soal</option>
                            <option value="Video Pembelajaran">ğŸ¥ Video Pembelajaran</option>
                            <option value="Membuat Catatan">ğŸ“‹ Membuat Catatan</option>
                            <option value="Belajar Kelompok">ğŸ‘¥ Belajar Kelompok</option>
                            <option value="Diskusi">ğŸ’¬ Diskusi</option>
                            <option value="Presentasi">ğŸ¤ Presentasi</option>
                            <option value="Proyek">ğŸ”¬ Proyek</option>
                            <option value="Les Privat">ğŸ‘¨â€ğŸ« Les Privat</option>
                        </select>
                    </div>

                    <!-- Mata Pelajaran -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ“– Mata Pelajaran</label>
                        <select id="mataPelajaran" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Pilih Mata Pelajaran</option>
                            <option value="Matematika">ğŸ”¢ Matematika</option>
                            <option value="Bahasa Indonesia">ğŸ‡®ğŸ‡© Bahasa Indonesia</option>
                            <option value="Bahasa Inggris">ğŸ‡ºğŸ‡¸ Bahasa Inggris</option>
                            <option value="Fisika">âš›ï¸ Fisika</option>
                            <option value="Kimia">ğŸ§ª Kimia</option>
                            <option value="Biologi">ğŸ§¬ Biologi</option>
                            <option value="Sejarah">ğŸ“œ Sejarah</option>
                            <option value="Geografi">ğŸŒ Geografi</option>
                            <option value="Ekonomi">ğŸ’° Ekonomi</option>
                            <option value="Sosiologi">ğŸ‘¥ Sosiologi</option>
                            <option value="PKN">ğŸ›ï¸ PKN</option>
                            <option value="Agama">ğŸ¤² Agama</option>
                            <option value="Seni Budaya">ğŸ¨ Seni Budaya</option>
                            <option value="Produktif">âš™ï¸ Produktif</option>
                        </select>
                    </div>
                </div>

                <!-- Deskripsi Kegiatan -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">âœï¸ Deskripsi Kegiatan</label>
                    <textarea id="deskripsiKegiatan" placeholder="Contoh: Belajar Kelompok Membahas PR Matematika tentang Integral dengan teman sekelas" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 h-20 resize-none" required></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Durasi -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">â±ï¸ Durasi (menit)</label>
                        <input type="number" id="durasiBelajar" placeholder="90" min="1" max="480" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                    </div>

                    <!-- Waktu -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ• Waktu Belajar</label>
                        <select id="waktuBelajar" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Pilih Waktu</option>
                            <option value="Pagi">ğŸŒ… Pagi (06:00-12:00)</option>
                            <option value="Siang">â˜€ï¸ Siang (12:00-15:00)</option>
                            <option value="Sore">ğŸŒ‡ Sore (15:00-18:00)</option>
                            <option value="Malam">ğŸŒ™ Malam (18:00-22:00)</option>
                        </select>
                    </div>
                </div>

                <!-- Tips Belajar -->
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-blue-800 mb-3">ğŸ’¡ Tips Belajar Efektif</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-blue-700">
                        <div>â€¢ ğŸ¯ Tentukan tujuan belajar yang jelas</div>
                        <div>â€¢ ğŸ“± Hindari gangguan gadget</div>
                        <div>â€¢ â° Buat jadwal belajar rutin</div>
                        <div>â€¢ ğŸ¤ Diskusi dengan teman</div>
                        <div>â€¢ ğŸ“ Buat catatan penting</div>
                        <div>â€¢ ğŸ’ª Istirahat setiap 45 menit</div>
                    </div>
                </div>

                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 font-medium">
                        âœ… Tambah Kegiatan
                    </button>
                    <button type="button" onclick="closeModal('belajarDetailModal')" class="flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 font-medium">
                        âŒ Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bermasyarakat Detail Modal -->
    <div id="bermasyarakatDetailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-6 text-center">ğŸ¤ Detail Kegiatan Bermasyarakat</h3>
            
            <form id="bermasyarakatForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Jenis Kegiatan -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">âœ… Jenis Kegiatan</label>
                        <select id="jenisKegiatanMasyarakat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" required>
                            <option value="">Pilih Jenis Kegiatan</option>
                            <option value="Siskamling/Ronda">ğŸ›¡ï¸ Siskamling/Ronda</option>
                            <option value="Gotong Royong">ğŸ¤ Gotong Royong</option>
                            <option value="Kerja Bakti">ğŸ§¹ Kerja Bakti</option>
                            <option value="Membantu Tetangga">ğŸ  Membantu Tetangga</option>
                            <option value="Takziah">ğŸ¤² Takziah</option>
                            <option value="Arisan RT/RW">ğŸ’° Arisan RT/RW</option>
                            <option value="Pengajian">ğŸ“¿ Pengajian</option>
                            <option value="Karang Taruna">ğŸ‘¥ Karang Taruna</option>
                            <option value="Posyandu">ğŸ¥ Posyandu</option>
                            <option value="Bakti Sosial">â¤ï¸ Bakti Sosial</option>
                            <option value="Rapat RT/RW">ğŸ“‹ Rapat RT/RW</option>
                            <option value="Perayaan 17 Agustus">ğŸ‡®ğŸ‡© Perayaan 17 Agustus</option>
                            <option value="Donor Darah">ğŸ©¸ Donor Darah</option>
                            <option value="Bersih-bersih Masjid">ğŸ•Œ Bersih-bersih Masjid</option>
                            <option value="Kegiatan Pemuda">âš½ Kegiatan Pemuda</option>
                            <option value="Lainnya">ğŸ“ Lainnya</option>
                        </select>
                    </div>

                    <!-- Lokasi Kegiatan -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ“ Lokasi Kegiatan</label>
                        <input type="text" id="lokasiKegiatan" placeholder="Contoh: RT 05/RW 02, Masjid Al-Ikhlas, Balai Desa" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" required>
                    </div>
                </div>

                <!-- Detail Kegiatan -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ“ Detail Kegiatan</label>
                    <textarea id="detailKegiatanMasyarakat" placeholder="Contoh: Gotong Royong Membersihkan Selokan di Jalan Mawar bersama warga RT 05" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 h-20 resize-none" required></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Durasi -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">â±ï¸ Durasi (menit)</label>
                        <input type="number" id="durasiMasyarakat" placeholder="120" min="1" max="480" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" required>
                    </div>

                    <!-- Waktu -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ• Waktu Kegiatan</label>
                        <select id="waktuMasyarakat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" required>
                            <option value="">Pilih Waktu</option>
                            <option value="Pagi">ğŸŒ… Pagi (06:00-12:00)</option>
                            <option value="Siang">â˜€ï¸ Siang (12:00-15:00)</option>
                            <option value="Sore">ğŸŒ‡ Sore (15:00-18:00)</option>
                            <option value="Malam">ğŸŒ™ Malam (18:00-22:00)</option>
                        </select>
                    </div>
                </div>

                <!-- Tips Bermasyarakat -->
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-purple-800 mb-3">ğŸ’¡ Tips Menjadi Warga yang Baik</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700">
                        <div>â€¢ ğŸ¤ Aktif dalam kegiatan RT/RW</div>
                        <div>â€¢ ğŸ  Peduli dengan tetangga sekitar</div>
                        <div>â€¢ ğŸ§¹ Menjaga kebersihan lingkungan</div>
                        <div>â€¢ ğŸ‘¥ Ikut serta dalam gotong royong</div>
                        <div>â€¢ ğŸ›¡ï¸ Berpartisipasi dalam keamanan</div>
                        <div>â€¢ â¤ï¸ Membantu yang membutuhkan</div>
                    </div>
                </div>

                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-purple-500 text-white py-3 rounded-lg hover:bg-purple-600 font-medium">
                        âœ… Tambah Kegiatan
                    </button>
                    <button type="button" onclick="closeModal('bermasyarakatDetailModal')" class="flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 font-medium">
                        âŒ Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Storage
        let currentUser = null;
        let dataGuru = [];
        let dataSiswa = [];
        let dataJurnal = [];
        let assignments = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            loadSampleData();
        });

        function updateCurrentDate() {
            const today = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('id-ID', options);
        }

        function loadSampleData() {
            // Sample data guru
            dataGuru = [
                { id: 1, nama: 'Budi Santoso', jabatan: 'Guru Matematika', jurusan: 'IPA, IPS' },
                { id: 2, nama: 'Siti Nurhaliza', jabatan: 'Guru Bahasa Indonesia', jurusan: 'Bahasa' },
                { id: 3, nama: 'Ahmad Fauzi', jabatan: 'Guru TKJ', jurusan: 'TKJ' }
            ];

            // Sample data siswa
            dataSiswa = [
                { id: 1, nama: 'Andi Pratama', kelas: 'X', jurusan: 'IPA', agama: 'Islam', guruWali: null },
                { id: 2, nama: 'Sari Dewi', kelas: 'XI', jurusan: 'IPS', agama: 'Kristen', guruWali: null },
                { id: 3, nama: 'Riko Saputra', kelas: 'XII', jurusan: 'TKJ', agama: 'Islam', guruWali: null }
            ];

            updateStatistics();
        }

        // Login System
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;

            if (username && password && role) {
                currentUser = { username, role };
                showDashboard(role);
                
                if (role === 'siswa') {
                    document.getElementById('studentName').textContent = username;
                }
            } else {
                alert('Mohon lengkapi semua field!');
            }
        });

        function showDashboard(role) {
            document.getElementById('loginPage').classList.add('hidden');
            
            if (role === 'admin') {
                document.getElementById('adminDashboard').classList.remove('hidden');
                renderGuruTable();
                renderSiswaTable();
            } else if (role === 'guru') {
                document.getElementById('guruDashboard').classList.remove('hidden');
                renderJurnalTable();
            } else if (role === 'siswa') {
                document.getElementById('siswaDashboard').classList.remove('hidden');
                loadTodayJournal();
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('guruDashboard').classList.add('hidden');
            document.getElementById('siswaDashboard').classList.add('hidden');
            
            // Reset form
            document.getElementById('loginForm').reset();
        }

        // Admin Functions
        function switchTab(tab) {
            if (tab === 'guru') {
                document.getElementById('guruTab').classList.remove('hidden');
                document.getElementById('siswaTab').classList.add('hidden');
                document.getElementById('tabGuru').classList.add('border-indigo-500', 'text-indigo-600');
                document.getElementById('tabGuru').classList.remove('border-transparent', 'text-gray-500');
                document.getElementById('tabSiswa').classList.remove('border-indigo-500', 'text-indigo-600');
                document.getElementById('tabSiswa').classList.add('border-transparent', 'text-gray-500');
            } else {
                document.getElementById('siswaTab').classList.remove('hidden');
                document.getElementById('guruTab').classList.add('hidden');
                document.getElementById('tabSiswa').classList.add('border-indigo-500', 'text-indigo-600');
                document.getElementById('tabSiswa').classList.remove('border-transparent', 'text-gray-500');
                document.getElementById('tabGuru').classList.remove('border-indigo-500', 'text-indigo-600');
                document.getElementById('tabGuru').classList.add('border-transparent', 'text-gray-500');
            }
        }

        function updateStatistics() {
            document.getElementById('totalGuru').textContent = dataGuru.length;
            document.getElementById('totalSiswa').textContent = dataSiswa.length;
        }

        function showAddGuruModal() {
            document.getElementById('addGuruModal').classList.remove('hidden');
        }

        function showAddSiswaModal() {
            document.getElementById('addSiswaModal').classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        document.getElementById('addGuruForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const nama = document.getElementById('namaGuru').value;
            const jabatan = document.getElementById('jabatanGuru').value;
            const jurusan = document.getElementById('jurusanGuru').value;

            const newGuru = {
                id: dataGuru.length + 1,
                nama,
                jabatan,
                jurusan
            };

            dataGuru.push(newGuru);
            renderGuruTable();
            updateStatistics();
            closeModal('addGuruModal');
            this.reset();
        });

        document.getElementById('addSiswaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const nama = document.getElementById('namaSiswa').value;
            const kelas = document.getElementById('kelasSiswa').value;
            const jurusan = document.getElementById('jurusanSiswa').value;
            const agama = document.getElementById('agamaSiswa').value;

            const newSiswa = {
                id: dataSiswa.length + 1,
                nama,
                kelas,
                jurusan,
                agama,
                guruWali: null
            };

            dataSiswa.push(newSiswa);
            renderSiswaTable();
            updateStatistics();
            closeModal('addSiswaModal');
            this.reset();
        });

        function renderGuruTable() {
            const tbody = document.getElementById('guruTableBody');
            tbody.innerHTML = '';

            dataGuru.forEach(guru => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${guru.nama}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${guru.jabatan}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${guru.jurusan}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="deleteGuru(${guru.id})" class="text-red-600 hover:text-red-900">Hapus</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderSiswaTable() {
            const tbody = document.getElementById('siswaTableBody');
            tbody.innerHTML = '';

            dataSiswa.forEach(siswa => {
                const guruWali = siswa.guruWali ? dataGuru.find(g => g.id === siswa.guruWali)?.nama : 'Belum ditugaskan';
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${siswa.nama}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${siswa.kelas}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${siswa.jurusan}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${guruWali}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="deleteSiswa(${siswa.id})" class="text-red-600 hover:text-red-900">Hapus</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function deleteGuru(id) {
            if (confirm('Yakin ingin menghapus data guru ini?')) {
                dataGuru = dataGuru.filter(g => g.id !== id);
                renderGuruTable();
                updateStatistics();
            }
        }

        function deleteSiswa(id) {
            if (confirm('Yakin ingin menghapus data siswa ini?')) {
                dataSiswa = dataSiswa.filter(s => s.id !== id);
                renderSiswaTable();
                updateStatistics();
            }
        }

        function downloadTemplate(type) {
            let csvContent = '';
            if (type === 'guru') {
                csvContent = 'Nama Guru,Jabatan Guru,Guru Wali Jurusan\nContoh Guru,Guru Matematika,"IPA,IPS"';
            } else {
                csvContent = 'Nama Siswa,Kelas,Jurusan,Agama\nContoh Siswa,X,IPA,Islam';
            }

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `template_${type}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function importCSV(type) {
            const fileInput = document.getElementById(`csv${type.charAt(0).toUpperCase() + type.slice(1)}File`);
            const file = fileInput.files[0];
            
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                const lines = csv.split('\n');
                const headers = lines[0].split(',');
                
                for (let i = 1; i < lines.length; i++) {
                    if (lines[i].trim()) {
                        const values = lines[i].split(',');
                        
                        if (type === 'guru') {
                            const newGuru = {
                                id: dataGuru.length + 1,
                                nama: values[0]?.trim(),
                                jabatan: values[1]?.trim(),
                                jurusan: values[2]?.trim().replace(/"/g, '')
                            };
                            dataGuru.push(newGuru);
                        } else {
                            const newSiswa = {
                                id: dataSiswa.length + 1,
                                nama: values[0]?.trim(),
                                kelas: values[1]?.trim(),
                                jurusan: values[2]?.trim(),
                                agama: values[3]?.trim(),
                                guruWali: null
                            };
                            dataSiswa.push(newSiswa);
                        }
                    }
                }
                
                if (type === 'guru') {
                    renderGuruTable();
                } else {
                    renderSiswaTable();
                }
                updateStatistics();
                alert(`Data ${type} berhasil diimport!`);
            };
            reader.readAsText(file);
        }

        function showAssignmentModal() {
            document.getElementById('assignmentModal').classList.remove('hidden');
            
            // Populate guru dropdown
            const guruSelect = document.getElementById('assignGuru');
            guruSelect.innerHTML = '<option value="">Pilih Guru</option>';
            dataGuru.forEach(guru => {
                guruSelect.innerHTML += `<option value="${guru.id}">${guru.nama} - ${guru.jurusan}</option>`;
            });
            
            // Populate siswa list
            const siswaList = document.getElementById('assignSiswaList');
            siswaList.innerHTML = '';
            dataSiswa.forEach(siswa => {
                siswaList.innerHTML += `
                    <label class="flex items-center">
                        <input type="checkbox" value="${siswa.id}" class="assign-siswa mr-2">
                        <span class="text-sm">${siswa.nama} - ${siswa.kelas} ${siswa.jurusan}</span>
                    </label>
                `;
            });
        }

        function saveAssignment() {
            const guruId = parseInt(document.getElementById('assignGuru').value);
            const selectedSiswa = Array.from(document.querySelectorAll('.assign-siswa:checked')).map(cb => parseInt(cb.value));
            
            if (!guruId || selectedSiswa.length === 0) {
                alert('Pilih guru dan minimal satu siswa!');
                return;
            }
            
            // Update siswa data
            selectedSiswa.forEach(siswaId => {
                const siswa = dataSiswa.find(s => s.id === siswaId);
                if (siswa) {
                    siswa.guruWali = guruId;
                }
            });
            
            renderSiswaTable();
            closeModal('assignmentModal');
            alert('Penugasan berhasil disimpan!');
        }

        // Guru Functions
        function applyFilter() {
            renderJurnalTable();
        }

        function resetFilter() {
            document.getElementById('filterKelas').value = '';
            document.getElementById('filterTanggal').value = '';
            document.getElementById('filterAgama').value = '';
            document.querySelectorAll('.jurusan-filter').forEach(cb => cb.checked = false);
            renderJurnalTable();
        }

        function renderJurnalTable() {
            const tbody = document.getElementById('jurnalTableBody');
            tbody.innerHTML = '';
            
            // Sample journal data
            const sampleJournal = [
                { siswa: 'Andi Pratama', kelas: 'X IPA', tanggal: '2024-01-15', completed: 5, total: 7, status: 'Sebagian' },
                { siswa: 'Sari Dewi', kelas: 'XI IPS', tanggal: '2024-01-15', completed: 7, total: 7, status: 'Lengkap' },
                { siswa: 'Riko Saputra', kelas: 'XII TKJ', tanggal: '2024-01-15', completed: 3, total: 7, status: 'Kurang' }
            ];
            
            sampleJournal.forEach(journal => {
                const row = document.createElement('tr');
                const statusColor = journal.status === 'Lengkap' ? 'text-green-600' : 
                                  journal.status === 'Sebagian' ? 'text-yellow-600' : 'text-red-600';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${journal.siswa}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${journal.kelas}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${journal.tanggal}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${journal.completed}/${journal.total}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium ${statusColor}">${journal.status}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button class="text-indigo-600 hover:text-indigo-900">Detail</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Siswa Functions
        function updateIbadahOptions() {
            const agama = document.getElementById('agamaSelect').value;
            const container = document.getElementById('ibadahOptions');
            container.innerHTML = '';
            
            if (agama === 'Islam') {
                container.innerHTML = `
                    <div class="space-y-2">
                        <p class="text-sm font-medium text-gray-700">Sholat Wajib:</p>
                        <div class="grid grid-cols-1 gap-1 text-xs">
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="subuh"> Subuh (04:30-06:00)</label>
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="dzuhur"> Dzuhur (11:30-15:00)</label>
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="ashar"> Ashar (15:00-18:00)</label>
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="maghrib"> Maghrib (18:00-19:30)</label>
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="isya"> Isya (19:30-04:00)</label>
                        </div>
                        <p class="text-sm font-medium text-gray-700 mt-3">Sholat Sunnah:</p>
                        <div class="grid grid-cols-1 gap-1 text-xs">
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="rawatib"> Shalat Rawatib</label>
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="dhuha"> Shalat Dhuha</label>
                            <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="tahajud"> Shalat Tahajud</label>
                        </div>
                    </div>
                `;
            } else if (agama === 'Kristen' || agama === 'Katolik') {
                container.innerHTML = `
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="doa_pagi"> Doa Pagi</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="doa_malam"> Doa Malam</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="ibadah_minggu"> Ibadah Minggu</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="baca_alkitab"> Membaca Alkitab</label>
                    </div>
                `;
            } else if (agama === 'Hindu') {
                container.innerHTML = `
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="puja_pagi"> Puja Pagi</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="puja_sore"> Puja Sore</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="sembahyang"> Sembahyang</label>
                    </div>
                `;
            } else if (agama === 'Buddha') {
                container.innerHTML = `
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="meditasi"> Meditasi</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="sembahyang_buddha"> Sembahyang</label>
                        <label class="flex items-center"><input type="checkbox" class="ibadah-checkbox mr-1" value="baca_dharma"> Membaca Dharma</label>
                    </div>
                `;
            }
        }

        function showMakanDetail() {
            document.getElementById('makanDetailModal').classList.remove('hidden');
        }

        function showBelajarDetail() {
            document.getElementById('belajarDetailModal').classList.remove('hidden');
        }

        function showBermasyarakatDetail() {
            document.getElementById('bermasyarakatDetailModal').classList.remove('hidden');
        }

        // Handle belajar form submission
        document.getElementById('belajarForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const jenisKegiatan = document.getElementById('jenisKegiatan').value;
            const mataPelajaran = document.getElementById('mataPelajaran').value;
            const deskripsiKegiatan = document.getElementById('deskripsiKegiatan').value;
            const durasiBelajar = parseInt(document.getElementById('durasiBelajar').value);
            const waktuBelajar = document.getElementById('waktuBelajar').value;
            
            if (!jenisKegiatan || !mataPelajaran || !deskripsiKegiatan || !durasiBelajar || !waktuBelajar) {
                alert('Mohon lengkapi semua field!');
                return;
            }
            
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            let todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            // Initialize belajar activities if not exists
            if (!todayJournal.gemarBelajar) {
                todayJournal.gemarBelajar = {
                    type: 'gemarBelajar',
                    activities: []
                };
            }
            
            // Add new activity
            const newActivity = {
                id: Date.now(),
                jenis: jenisKegiatan,
                mataPelajaran: mataPelajaran,
                deskripsi: deskripsiKegiatan,
                durasi: durasiBelajar,
                waktu: waktuBelajar,
                timestamp: new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })
            };
            
            todayJournal.gemarBelajar.activities.push(newActivity);
            localStorage.setItem(journalKey, JSON.stringify(todayJournal));
            
            // Update display
            updateBelajarSummary();
            updateBelajarHistory();
            
            // Reset form and close modal
            document.getElementById('belajarForm').reset();
            closeModal('belajarDetailModal');
            
            alert('Kegiatan belajar berhasil ditambahkan!');
        });

        // Handle bermasyarakat form submission
        document.getElementById('bermasyarakatForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const jenisKegiatan = document.getElementById('jenisKegiatanMasyarakat').value;
            const lokasiKegiatan = document.getElementById('lokasiKegiatan').value;
            const detailKegiatan = document.getElementById('detailKegiatanMasyarakat').value;
            const durasiMasyarakat = parseInt(document.getElementById('durasiMasyarakat').value);
            const waktuMasyarakat = document.getElementById('waktuMasyarakat').value;
            
            if (!jenisKegiatan || !lokasiKegiatan || !detailKegiatan || !durasiMasyarakat || !waktuMasyarakat) {
                alert('Mohon lengkapi semua field!');
                return;
            }
            
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            let todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            // Initialize bermasyarakat activities if not exists
            if (!todayJournal.bermasyarakat) {
                todayJournal.bermasyarakat = {
                    type: 'bermasyarakat',
                    activities: []
                };
            }
            
            // Add new activity
            const newActivity = {
                id: Date.now(),
                jenis: jenisKegiatan,
                lokasi: lokasiKegiatan,
                detail: detailKegiatan,
                durasi: durasiMasyarakat,
                waktu: waktuMasyarakat,
                timestamp: new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })
            };
            
            todayJournal.bermasyarakat.activities.push(newActivity);
            localStorage.setItem(journalKey, JSON.stringify(todayJournal));
            
            // Update display
            updateBermasyarakatSummary();
            updateBermasyarakatHistory();
            
            // Reset form and close modal
            document.getElementById('bermasyarakatForm').reset();
            closeModal('bermasyarakatDetailModal');
            
            alert('Kegiatan bermasyarakat berhasil ditambahkan!');
        });

        function updateBelajarSummary() {
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            const todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            const activities = todayJournal.gemarBelajar?.activities || [];
            const totalActivities = activities.length;
            const totalDuration = activities.reduce((sum, activity) => sum + activity.durasi, 0);
            
            document.getElementById('totalAktivitas').textContent = totalActivities;
            document.getElementById('totalDurasi').textContent = totalDuration;
        }

        function updateBelajarHistory() {
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            const todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            const activities = todayJournal.gemarBelajar?.activities || [];
            const historyContainer = document.getElementById('belajarHistory');
            
            if (activities.length === 0) {
                historyContainer.innerHTML = '<p class="text-gray-500 text-sm text-center py-4">Belum ada kegiatan belajar hari ini</p>';
                return;
            }
            
            historyContainer.innerHTML = activities.map(activity => `
                <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-blue-400">
                    <div class="flex justify-between items-start mb-1">
                        <span class="font-medium text-sm text-gray-800">${activity.jenis}</span>
                        <span class="text-xs text-gray-500">${activity.timestamp}</span>
                    </div>
                    <p class="text-xs text-gray-600 mb-1">${activity.mataPelajaran} â€¢ ${activity.waktu} â€¢ ${activity.durasi} menit</p>
                    <p class="text-xs text-gray-700">${activity.deskripsi}</p>
                </div>
            `).join('');
        }

        function updateBermasyarakatSummary() {
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            const todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            const activities = todayJournal.bermasyarakat?.activities || [];
            const totalActivities = activities.length;
            const totalDuration = activities.reduce((sum, activity) => sum + activity.durasi, 0);
            
            document.getElementById('totalKegiatanMasyarakat').textContent = totalActivities;
            document.getElementById('totalDurasiMasyarakat').textContent = totalDuration;
        }

        function updateBermasyarakatHistory() {
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            const todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            const activities = todayJournal.bermasyarakat?.activities || [];
            const historyContainer = document.getElementById('bermasyarakatHistory');
            
            if (activities.length === 0) {
                historyContainer.innerHTML = '<p class="text-gray-500 text-sm text-center py-4">Belum ada kegiatan bermasyarakat hari ini</p>';
                return;
            }
            
            historyContainer.innerHTML = activities.map(activity => `
                <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-purple-400">
                    <div class="flex justify-between items-start mb-1">
                        <span class="font-medium text-sm text-gray-800">${activity.jenis}</span>
                        <span class="text-xs text-gray-500">${activity.timestamp}</span>
                    </div>
                    <p class="text-xs text-gray-600 mb-1">${activity.lokasi} â€¢ ${activity.waktu} â€¢ ${activity.durasi} menit</p>
                    <p class="text-xs text-gray-700">${activity.detail}</p>
                </div>
            `).join('');
        }

        function saveHabit(habitType) {
            const today = new Date().toISOString().split('T')[0];
            let habitData = {};
            
            switch(habitType) {
                case 'bangunPagi':
                    habitData = {
                        type: 'bangunPagi',
                        waktu: document.getElementById('bangunPagi').value
                    };
                    break;
                    
                case 'beribadah':
                    const agama = document.getElementById('agamaSelect').value;
                    const ibadahChecked = Array.from(document.querySelectorAll('.ibadah-checkbox:checked')).map(cb => cb.value);
                    habitData = {
                        type: 'beribadah',
                        agama: agama,
                        ibadah: ibadahChecked
                    };
                    break;
                    
                case 'berolahraga':
                    habitData = {
                        type: 'berolahraga',
                        jenis: document.getElementById('jenisOlahraga').value,
                        durasi: document.getElementById('durasiOlahraga').value
                    };
                    break;
                    
                case 'makanSehat':
                    const sarapan = Array.from(document.querySelectorAll('.makan-sarapan:checked')).map(cb => cb.value);
                    const siang = Array.from(document.querySelectorAll('.makan-siang:checked')).map(cb => cb.value);
                    const malam = Array.from(document.querySelectorAll('.makan-malam:checked')).map(cb => cb.value);
                    habitData = {
                        type: 'makanSehat',
                        sarapan: sarapan,
                        siang: siang,
                        malam: malam
                    };
                    break;
                    
                case 'gemarBelajar':
                    habitData = {
                        type: 'gemarBelajar',
                        kegiatan: document.getElementById('kegiatanBelajar').value
                    };
                    break;
                    
                case 'bermasyarakat':
                    habitData = {
                        type: 'bermasyarakat',
                        kegiatan: document.getElementById('kegiatanMasyarakat').value
                    };
                    break;
                    
                case 'tidurCepat':
                    habitData = {
                        type: 'tidurCepat',
                        waktu: document.getElementById('tidurCepat').value
                    };
                    break;
            }
            
            // Save to localStorage or send to server
            const journalKey = `journal_${currentUser.username}_${today}`;
            let todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            todayJournal[habitType] = habitData;
            localStorage.setItem(journalKey, JSON.stringify(todayJournal));
            
            alert(`${getHabitName(habitType)} berhasil disimpan!`);
        }

        function getHabitName(habitType) {
            const names = {
                'bangunPagi': 'Bangun Pagi',
                'beribadah': 'Beribadah',
                'berolahraga': 'Berolahraga',
                'makanSehat': 'Makan Sehat',
                'gemarBelajar': 'Gemar Belajar',
                'bermasyarakat': 'Bermasyarakat',
                'tidurCepat': 'Tidur Cepat'
            };
            return names[habitType] || habitType;
        }

        function loadTodayJournal() {
            const today = new Date().toISOString().split('T')[0];
            const journalKey = `journal_${currentUser.username}_${today}`;
            const todayJournal = JSON.parse(localStorage.getItem(journalKey)) || {};
            
            // Load saved data back to form
            Object.keys(todayJournal).forEach(habitType => {
                const data = todayJournal[habitType];
                
                switch(habitType) {
                    case 'bangunPagi':
                        if (data.waktu) document.getElementById('bangunPagi').value = data.waktu;
                        break;
                    case 'beribadah':
                        if (data.agama) {
                            document.getElementById('agamaSelect').value = data.agama;
                            updateIbadahOptions();
                            setTimeout(() => {
                                data.ibadah?.forEach(ibadah => {
                                    const checkbox = document.querySelector(`.ibadah-checkbox[value="${ibadah}"]`);
                                    if (checkbox) checkbox.checked = true;
                                });
                            }, 100);
                        }
                        break;
                    case 'berolahraga':
                        if (data.jenis) document.getElementById('jenisOlahraga').value = data.jenis;
                        if (data.durasi) document.getElementById('durasiOlahraga').value = data.durasi;
                        break;
                    case 'makanSehat':
                        data.sarapan?.forEach(item => {
                            const checkbox = document.querySelector(`.makan-sarapan[value="${item}"]`);
                            if (checkbox) checkbox.checked = true;
                        });
                        data.siang?.forEach(item => {
                            const checkbox = document.querySelector(`.makan-siang[value="${item}"]`);
                            if (checkbox) checkbox.checked = true;
                        });
                        data.malam?.forEach(item => {
                            const checkbox = document.querySelector(`.makan-malam[value="${item}"]`);
                            if (checkbox) checkbox.checked = true;
                        });
                        break;
                    case 'gemarBelajar':
                        // Load belajar activities and update summary
                        updateBelajarSummary();
                        updateBelajarHistory();
                        break;
                    case 'bermasyarakat':
                        // Load bermasyarakat activities and update summary
                        updateBermasyarakatSummary();
                        updateBermasyarakatHistory();
                        break;
                    case 'tidurCepat':
                        if (data.waktu) document.getElementById('tidurCepat').value = data.waktu;
                        break;
                }
            });
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9848a77517fd9cd5',t:'MTc1ODc4MzcyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
